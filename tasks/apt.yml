---
- name: Install dependencies
  ansible.builtin.apt:
    pkg:
      - ca-certificates-java
      - fonts-liberation
      - java-common
      - libpcsclite1
      - gpg
    state: fixed
  when: googlechrome_state != "absent"
  tags: googlechrome

- name: Add repository key
  ansible.builtin.get_url:
    url: "{{ googlechrome_linux_signing_key_url }}"
    dest: /usr/share/keyrings/example-archive-keyring.gpg
  when: googlechrome_state != "absent"
  tags: googlechrome

- name: Manage repository URL in the sources list
  ansible.builtin.apt_repository:
    repo: "{{ googlechrome_apt_repository_url }}"
    state: "{{ googlechrome_state }}"
  when: googlechrome_state in ["absent", "present"]
  tags: googlechrome

- name: Make Google Chrome {{ googlechrome_state }}
  ansible.builtin.apt:
    name: "google-chrome-stable"
    state: "{{ googlechrome_state }}"
    autoremove: true
    force_apt_get: true
  tags: googlechrome
